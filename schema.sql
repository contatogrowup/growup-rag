create table if not exists axis (id uuid primary key default gen_random_uuid(), name text unique not null, weight numeric default 1);
create table if not exists metric_type (id uuid primary key default gen_random_uuid(), name text unique not null, unit text, axis_name text not null, min numeric not null, max numeric not null, up_better boolean not null);
create table if not exists config (id text primary key default 'default', green_min numeric default 4, yellow_min numeric default 2.5, w_subj numeric default 0.6, w_metr numeric default 0.4);
create table if not exists assessment (id uuid primary key default gen_random_uuid(), mentee_name text, city_uf text, porte text, ramo text, team_size int, month_ref text, status text default 'awaiting_review', created_at timestamptz default now());
create table if not exists answer (id uuid primary key default gen_random_uuid(), assessment_id uuid references assessment(id) on delete cascade, axis_name text not null, question_text text not null, score numeric, type text, segment_type text, segment_value text);
create table if not exists metric_value (id uuid primary key default gen_random_uuid(), assessment_id uuid references assessment(id) on delete cascade, metric_name text not null, value numeric, score05 numeric);
create table if not exists summary (id uuid primary key default gen_random_uuid(), assessment_id uuid references assessment(id) on delete cascade, axis_name text, subj_score numeric, metric_score numeric, combined_score numeric, rag text, gap numeric, priority numeric, comercial_health text, defensiveness numeric);
create table if not exists plan_item (id uuid primary key default gen_random_uuid(), assessment_id uuid references assessment(id) on delete cascade, axis_name text, rag text, tasks text, kpis text);
